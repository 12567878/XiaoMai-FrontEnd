(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-228ce972"],{"03c9":function(e,t,s){},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,s){var a=s("1d80"),r=s("5899"),i="["+r+"]",n=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),c=function(e){return function(t){var s=String(a(t));return 1&e&&(s=s.replace(n,"")),2&e&&(s=s.replace(o,"")),s}};e.exports={start:c(1),end:c(2),trim:c(3)}},6015:function(e,t,s){"use strict";s("03c9")},"6a6a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-container",{attrs:{id:"container"}},[s("el-aside",{attrs:{id:"aside"}},[s("el-menu",{staticClass:"el-menu-vertical-demo menu",attrs:{"default-active":e.active},on:{"update:defaultActive":function(t){e.active=t},"update:default-active":function(t){e.active=t},select:e.handleSelect}},[s("el-menu-item",{staticClass:"menu_item",attrs:{index:"1"}},[s("i",{staticClass:"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("个人中心")])]),s("el-menu-item",{staticClass:"menu_item",attrs:{index:"2"}},[s("i",{staticClass:"el-icon-menu"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("订单管理")])]),s("el-menu-item",{staticClass:"menu_item",attrs:{index:"3"}},[s("i",{staticClass:"el-icon-document"}),s("span",{attrs:{slot:"title"},slot:"title"},[e._v("查看通知")])])],1)],1),"1"===e.active?s("el-main",{staticClass:"center"},[s("el-form",{ref:"changePasswordForm",staticClass:"demo-ruleForm",attrs:{model:e.changePasswordForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"账号",prop:"account"}},[s("el-input",{attrs:{placeholder:e.id,disabled:!0}})],1),s("el-divider"),s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{attrs:{disabled:""},model:{value:e.UserName,callback:function(t){e.UserName=t},expression:"UserName"}})],1),s("el-form-item",{attrs:{label:"地址"}},[s("el-input",{model:{value:e.Address,callback:function(t){e.Address=t},expression:"Address"}})],1),s("el-form-item",{attrs:{label:"电话"}},[s("el-input",{model:{value:e.PhoneNumber,callback:function(t){e.PhoneNumber=t},expression:"PhoneNumber"}})],1),s("el-form-item",{attrs:{label:"头像"}},[s("el-image",{staticStyle:{width:"100px",height:"100px","object-fit":"fill"},attrs:{src:"https://perico.damai.cn/userheadphotos/577160/115432124.jpg?r=0.5669333114520436"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("提交")])],1),s("el-divider"),s("el-form-item",{attrs:{label:"VIP等级"}},[e._v(e._s(e.level))]),"0"===e.level?s("el-form-item",{attrs:{label:"成为VIP"}},[s("el-button",{attrs:{type:"primary"},on:{click:e.becomeVIP}},[e._v("点击成为VIP")])],1):e._e(),"0"!==e.level?s("el-form-item",{attrs:{label:"积分"}},[e._v(e._s(e.point))]):e._e(),"0"!==e.level?s("el-form-item",{attrs:{label:"享受折扣"}},[e._v(e._s(e.discount)+"折")]):e._e(),"0"!==e.level?s("el-form-item",{attrs:{label:"旧密码",prop:"old_pass",required:""}},[s("el-input",{attrs:{type:"password"},model:{value:e.changePasswordForm.old_pass,callback:function(t){e.$set(e.changePasswordForm,"old_pass",t)},expression:"changePasswordForm.old_pass"}})],1):e._e(),s("el-form-item",{attrs:{label:"新密码",prop:"pass",required:""}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changePasswordForm.pass,callback:function(t){e.$set(e.changePasswordForm,"pass",t)},expression:"changePasswordForm.pass"}})],1),s("el-form-item",{attrs:{label:"确认新密码",prop:"checkPass",required:""}},[s("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.changePasswordForm.checkPass,callback:function(t){e.$set(e.changePasswordForm,"checkPass",t)},expression:"changePasswordForm.checkPass"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("changePasswordForm")}}},[e._v("提交")]),s("el-button",{attrs:{type:"danger"},on:{click:function(t){e.withdraw_check=!0}}},[e._v("注销")]),s("el-dialog",{attrs:{title:"警告",visible:e.withdraw_check,width:"30%"},on:{"update:visible":function(t){e.withdraw_check=t}}},[s("span",[e._v("会永久删除账号，确认删除？")]),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.withdraw}},[e._v("确 定")])],1)])],1)],1)],1):e._e(),"2"===e.active?s("el-main",[e.showsOrders?s("div",e._l(e.showsOrders,(function(t){return s("order-item",e._b({key:t.id},"order-item",t,!1))})),1):e._e(),e.goodOrders?s("div",e._l(e.goodOrders,(function(t){return s("order-item",e._b({key:t.id},"order-item",t,!1))})),1):e._e()]):e._e(),"3"===e.active&&e.notices?s("el-main",e._l(e.notices,(function(t){return s("notice-item",e._b({key:t.id},"notice-item",t,!1))})),1):e._e()],1)},r=[],i=s("1da1"),n=(s("96cf"),s("d3b7"),s("3ca3"),s("ddb0"),s("2b3d"),s("bc3a")),o=s.n(n),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{attrs:{id:"box-card","body-style":"{ padding-bottom: '0px' }",shadow:"hover"}},[s("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[s("span",{attrs:{id:"title"}},[e._v(e._s(e.type)),s("el-divider",{attrs:{direction:"vertical"}}),e._v("订单号："+e._s(e.id))],1),s("el-button",{attrs:{id:"delete",type:"danger",plain:""},on:{click:e.deleteOrder}},[e._v(" 退单")])],1),s("div",{staticClass:"block body"},[s("span",[s("router-link",{staticClass:"text block",attrs:{to:e.href,id:"item_title"}},[e._v(e._s("周边"===e.type?e.goodsName:e.showName))]),s("div",{staticStyle:{"line-height":"1.9"}},[s("div",{staticClass:"text",staticStyle:{color:"#909399"}},["演出"===e.type?s("div",{staticStyle:{"text-align":"left"}},[s("div",[s("i",{staticClass:"el-icon-time"}),e._v("场次："+e._s(e.day+" "+e.timeStart+"--"+e.timeEnd))]),s("div",[s("i",{staticClass:"el-icon-location-information"}),e._v("地点："+e._s(e.place))])]):e._e(),s("div",{staticClass:"text"},[s("i",{staticClass:"el-icon-user"}),e._v("商家："+e._s(e.sellerName)+" ")])]),s("div",{staticStyle:{float:"right","text-align":"right"}},[s("div",[e._v(e._s("￥"+e.price.toFixed(2)))])])])],1)]),s("div",[s("el-collapse",{staticClass:"block"},[s("el-collapse-item",{staticStyle:{"text-align":"left"}},[s("template",{slot:"title"},[s("span",{staticStyle:{float:"right","font-size":"16px"}},[e._v("订单详情")])]),s("div",[e._v("支付时间:"+e._s(e.payTime))]),"演出"===e.type?s("div",[s("div",[e._v("座位分区:"+e._s(e.areaName))]),s("div",[e._v("座位号:"+e._s(e.seatNumber))])]):e._e()],2)],1)],1)])},l=[],u=(s("a9e3"),{name:"orderItem",data:function(){return{dialogVisible:!1,rating:0,textarea:"",loading:!1}},props:{id:String,sellerName:String,goodsName:{type:String,default:""},showName:{type:String,default:""},place:{type:String,default:""},day:{type:String,default:""},timeStart:{type:String,default:""},timeEnd:{type:String,default:""},areaName:{type:String,default:""},seatNumber:{type:Number,default:0},payTime:String,price:Number},computed:{href:function(){return"/detailedInfo/"+this.id.toLowerCase()},type:function(){return"G"===this.id[0]?"周边":"演出"}},methods:{deleteOrder:function(){var e=this;o.a.delete("/AllOrder/"+this.id).then((function(t){200===t.status?(e.$message({message:"删除成功",type:"success"}),location.reload()):400===t.status&&e.$message.error("删除失败")})).catch((function(t){e.$message.error("出现故障"),console.log(t)}))}}}),d=u,m=(s("6015"),s("2877")),f=Object(m["a"])(d,c,l,!1,null,"b104acdc",null),p=f.exports,h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-card",{attrs:{shadow:"hover"}},[s("div",{staticClass:"header",attrs:{slot:"header"},slot:"header"},[s("span",{staticClass:"text",staticStyle:{float:"left",color:"#909399"}},[e._v(" 通知编号:"+e._s(e.id)+" ")])]),s("div",{attrs:{id:"body"}},[s("div",{attrs:{id:"title"}},[e._v(e._s(e.title))]),s("div",[e._v(e._s(e.content))])]),s("div",{attrs:{id:"time"}},[e._v("发布时间:"+e._s(e.time))])])},g=[],v={name:"noticeItem",props:{id:Number,time:String,title:String,content:String}},b=v,_=(s("bbe8"),Object(m["a"])(b,h,g,!1,null,"f8b20482",null)),w=_.exports,y=s("6c27"),I=s("e762"),N={name:"customerInfoCenter",components:{NoticeItem:w,OrderItem:p},data:function(){var e=this,t=function(e,t,s){if(""===t)return s(new Error("旧密码不能为空"));s()},s=function(t,s,a){""===s?a(new Error("请输入密码")):(""!==e.changePasswordForm.checkPass&&e.$refs.changePasswordForm.validateField("checkPass"),a())},a=function(t,s,a){""===s?a(new Error("请再次输入密码")):s!==e.changePasswordForm.pass?a(new Error("两次输入密码不一致!")):a()};return{file:"",fileURL:"",Image:"",Address:"",PhoneNumber:0,UserName:"",withdraw_check:!1,showsOrders:[],goodOrders:[],notices:[],active:"1",changePasswordForm:{pass:"",checkPass:"",old_pass:""},rules:{pass:[{validator:s,trigger:"blur"}],checkPass:[{validator:a,trigger:"blur"}],old_pass:[{validator:t,trigger:"blur"}]}}},computed:{id:function(){return sessionStorage.getItem("cusId")},level:function(){return sessionStorage.getItem("level")},point:function(){return sessionStorage.getItem("point")},discount:function(){return sessionStorage.getItem("discount")},imageURL:function(){return this.Image?I["a"].decode(this.Image):""},file_base64:function(){return I["a"].encode(this.fileURL)}},methods:{handleAvatarSuccess:function(e,t){this.file=e.data().url,this.imageUrl=URL.createObjectURL(t.raw)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,s=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&s},getInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.post("/PersonalCenter",{id:sessionStorage.getItem("cusId"),usertype:"CUSTOMER"}).then((function(t){200===t.status&&(e.UserName=t.data.UserName,e.Address=t.data.Address,e.PhoneNumber=t.data.PhoneNumber,e.Image=t.data.Image)}));case 2:case"end":return t.stop()}}),t)})))()},submitInfo:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.a.put("/UserManage/UpdatePersonalInfo?tokenValue="+sessionStorage.getItem("token")+"&address="+e.Address+"&phone_number="+e.PhoneNumber+"&photo=123").then((function(t){200===t.status&&e.$message.success("上传成功")})).catch((function(t){e.$message.error("上传失败"),console.log(t)}));case 2:case"end":return t.stop()}}),t)})))()},withdraw:function(){var e=this;o.a.delete("/UserManage/DeleteUser?tokenValue="+sessionStorage.getItem("token")).then((function(t){200===t.status&&(e.$message.success("删除成功"),e.withdraw_check=!1,sessionStorage.clear(),e.$router.push("/"))})).catch((function(e){console.log(e)}))},becomeVIP:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,o.a.post("/Vip/"+sessionStorage.getItem("cusId")).then((function(e){200===e.status&&(t.$message.success("成功"),location.reload())}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("提交失败!!"),!1;o.a.post("/UserManage/ResetPassword?tokenValue="+sessionStorage.getItem("token")+"&oldPassword="+Object(y["sha256"])(t.changePasswordForm.old_pass)+"&newPassword="+Object(y["sha256"])(t.changePasswordForm.pass)).then((function(e){200===e.status?(t.$message({message:"修改成功",type:"success"}),location.reload()):400===e.status?t.$message.error("修改失败"):404===e.status&&t.$message.error("旧密码错误")})).catch((function(e){console.log(e),t.$message.error("修改失败")}))}))},handleSelect:function(e){this.active=e}},created:function(){var e=this;this.$route.fullPath==="/NoticeBoard/"+sessionStorage.getItem("cusId")?this.active="3":this.$route.fullPath==="/Orders/"+sessionStorage.getItem("cusId")?this.active="2":this.active="1",o.a.get("/AllOrder/"+this.id).then((function(t){200===t.status&&(e.goodOrders=t.data.value.goodOrders,e.showsOrders=t.data.value.showsOrders)})).catch((function(t){e.$message.error("订单信息加载错误"),console.log(t)})),o.a.get("/GeneralCustomerNotice").then((function(t){200===t.status?e.notices=t.data.value:400!==t.status&&404!==t.status||e.$message.error("获取通知失败")})).catch((function(e){console.log(e)})),this.getInfo()},watch:{}},P=N,k=(s("b003"),Object(m["a"])(P,a,r,!1,null,null,null));t["default"]=k.exports},"6c41":function(e,t,s){},7156:function(e,t,s){var a=s("861d"),r=s("d2bb");e.exports=function(e,t,s){var i,n;return r&&"function"==typeof(i=t.constructor)&&i!==s&&a(n=i.prototype)&&n!==s.prototype&&r(e,n),e}},a9e3:function(e,t,s){"use strict";var a=s("83ab"),r=s("da84"),i=s("94ca"),n=s("6eeb"),o=s("5135"),c=s("c6b6"),l=s("7156"),u=s("c04e"),d=s("d039"),m=s("7c73"),f=s("241c").f,p=s("06cf").f,h=s("9bf2").f,g=s("58a8").trim,v="Number",b=r[v],_=b.prototype,w=c(m(_))==v,y=function(e){var t,s,a,r,i,n,o,c,l=u(e,!1);if("string"==typeof l&&l.length>2)if(l=g(l),t=l.charCodeAt(0),43===t||45===t){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===t){switch(l.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+l}for(i=l.slice(2),n=i.length,o=0;o<n;o++)if(c=i.charCodeAt(o),c<48||c>r)return NaN;return parseInt(i,a)}return+l};if(i(v,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var I,N=function(e){var t=arguments.length<1?0:e,s=this;return s instanceof N&&(w?d((function(){_.valueOf.call(s)})):c(s)!=v)?l(new b(y(t)),s,N):y(t)},P=a?f(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),k=0;P.length>k;k++)o(b,I=P[k])&&!o(N,I)&&h(N,I,p(b,I));N.prototype=_,_.constructor=N,n(r,v,N)}},b003:function(e,t,s){"use strict";s("ec93")},bbe8:function(e,t,s){"use strict";s("6c41")},ec93:function(e,t,s){}}]);
//# sourceMappingURL=chunk-228ce972.832f093c.js.map