(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-89937452"],{"6be2":function(o,e,t){},"88f2":function(o,e,t){"use strict";t("6be2")},"8d2e":function(o,e,t){"use strict";t.r(e);var s=function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{nativeOn:{click:function(e){return o.turnTo("outline")}}},[o._v("首页")]),t("el-breadcrumb-item",[o._v("我要发布")]),t("el-breadcrumb-item",[o._v("发布周边")])],1),t("el-card",{staticClass:"addCard",attrs:{shadow:"always"}},[t("div",{staticClass:"note"},[o._v("请填写您将要发布的周边的相关信息噢！")]),t("el-form",{ref:"goodsForm",staticClass:"demo-goodsForm",attrs:{model:o.goodsForm,rules:o.rules,"label-width":"120px","label-position":"left"}},[t("el-form-item",{attrs:{label:"对应的演出ID",prop:"showId"}},[t("el-input",{attrs:{placeholder:"请输入对应的演出ID"},model:{value:o.goodsForm.showId,callback:function(e){o.$set(o.goodsForm,"showId",e)},expression:"goodsForm.showId"}})],1),t("el-form-item",{attrs:{label:"周边名称",prop:"goodsName"}},[t("el-input",{attrs:{placeholder:"请输周边名称"},model:{value:o.goodsForm.goodsName,callback:function(e){o.$set(o.goodsForm,"goodsName",e)},expression:"goodsForm.goodsName"}})],1),t("el-form-item",{attrs:{label:"价格（RMB）",prop:"price"}},[t("el-input-number",{attrs:{"controls-position":"right",min:0},model:{value:o.goodsForm.price,callback:function(e){o.$set(o.goodsForm,"price",e)},expression:"goodsForm.price"}})],1),t("el-form-item",{attrs:{label:"数量",prop:"available"}},[t("el-input-number",{attrs:{"controls-position":"right",min:1},model:{value:o.goodsForm.available,callback:function(e){o.$set(o.goodsForm,"available",e)},expression:"goodsForm.available"}})],1),t("el-form-item",{attrs:{label:"上传实物图",prop:"goodsPhoto"}},[t("el-upload",{attrs:{action:"#","list-type":"picture-card","auto-upload":!1},scopedSlots:o._u([{key:"file",fn:function(e){var s=e.file;return t("div",{},[t("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:s.url,alt:""}}),t("span",{staticClass:"el-upload-list__item-actions"},[t("span",{staticClass:"el-upload-list__item-preview",on:{click:function(e){return o.handlePictureCardPreview(s)}}},[t("i",{staticClass:"el-icon-zoom-in"})])])])}}])},[t("i",{staticClass:"el-icon-plus",attrs:{slot:"default"},slot:"default"})])],1)],1),t("div",{staticClass:"button"},[t("el-button",{attrs:{type:"primary"},on:{click:function(e){return o.confirmForm("goodsForm")}}},[o._v("立即发布")]),t("el-button",{on:{click:function(e){return o.resetForm("goodsForm")}}},[o._v("重置")])],1)],1),t("el-dialog",{attrs:{title:"系统提示",visible:o.successVisible,width:"300px"},on:{"update:visible":function(e){o.successVisible=e}}},[t("span",[o._v("发布周边成功")]),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{attrs:{type:"primary"},on:{click:o.bothRemove}},[o._v("继续发布")]),t("el-button",{attrs:{type:"primary"},on:{click:function(e){return o.turnTo("outline")}}},[o._v(" 返回首页 ")])],1)]),t("el-dialog",{attrs:{title:"确认信息",visible:o.confirmVisible,width:"500px"},on:{"update:visible":function(e){o.confirmVisible=e}}},[t("div",[o._v(" 您将要发布一个周边，信息如下： "),t("el-card",{staticClass:"confirm-card"},[t("el-row",[o._v("商家ID:"+o._s(o.goodsForm.sellerId))]),t("el-row",[o._v("演出ID:"+o._s(o.goodsForm.showId))]),t("el-row",[o._v("周边名称:"+o._s(o.goodsForm.goodsName))]),t("el-row",[o._v("周边价格:"+o._s(o.goodsForm.price))]),t("el-row",[o._v("周边数量:"+o._s(o.goodsForm.available))])],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(e){o.confirmVisible=!1}}},[o._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:o.Release}},[o._v("确 定")])],1)])],1)},r=[],i=t("1da1"),a=(t("d3b7"),t("3ca3"),t("ddb0"),t("2b3d"),t("96cf"),t("bc3a")),l=t.n(a),n={goodsName:"ReleaseSlot",props:{msg:String},data:function(){return{goodsForm:{sellerId:this.$route.params.sellerId,showId:"",goodsName:"",goodsPhoto:"https://i.loli.net/2021/07/16/ZjTgrV2WMzKLFBn.jpg",price:"",available:""},rules:{showId:[{required:!0,message:"请输入对应的演出ID",trigger:"blur"}],goodsName:[{required:!0,message:"请输入周边名称",trigger:"blur"},{min:1,max:50,message:"长度在 1 到 50 个字符",trigger:"blur"}],description:[{required:!0,message:"请输入周边简介",trigger:"blur"},{min:1,max:4e3,message:"长度在 1 到 4000 个字符",trigger:"blur"}],price:[{required:!0,message:"请输入周边价格",trigger:"blur"}],available:[{required:!0,trigger:"blur"}]},successVisible:!1,confirmVisible:!1}},methods:{confirmForm:function(o){var e=this;this.$refs[o].validate((function(o){if(!o)return console.log("error submit!!"),!1;e.confirmVisible=!0}))},resetForm:function(o){this.$refs[o].resetFields()},Release:function(){var o=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t="/Goods",e.next=3,l.a.post(t,{sellerId:o.goodsForm.sellerId,showId:o.goodsForm.showId,goodsName:o.goodsForm.goodsName,goodsPhoto:o.goodsForm.goodsPhoto,price:o.goodsForm.price,available:o.goodsForm.available}).then((function(){o.successVisible=!0})).catch((function(o){console.log(o)}));case 3:case"end":return e.stop()}}),e)})))()},bothRemove:function(){this.successVisible=!1,this.confirmVisible=!1,this.resetForm("goodsForm")},handleAvatarSuccess:function(o,e){this.goodsForm.goodsPhoto=URL.createObjectURL(e.raw)},beforeAvatarUpload:function(o){var e="image/jpeg"===o.type,t=o.size/1024/1024<5;return e||this.$message.error("上传座位图片只能是 JPG 格式!"),t||this.$message.error("上传座位图片大小不能超过 5MB!"),e&&t},turnTo:function(o){this.$router.push("/"+o+"/"+sessionStorage.getItem("selId"))}}},c=n,d=(t("88f2"),t("2877")),u=Object(d["a"])(c,s,r,!1,null,"728c396e",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-89937452.30fb73bb.js.map